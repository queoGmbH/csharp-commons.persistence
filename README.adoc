= Commons.Persistence

[![Build Status](https://dev.azure.com/queo-commons/Commons-OpenSource/_apis/build/status%2FqueoGmbH.csharp-commons.persistence?branchName=main)](https://dev.azure.com/queo-commons/Commons-OpenSource/_build/latest?definitionId=4&branchName=main) [![Build Status](https://dev.azure.com/queo-commons/Commons-OpenSource/_apis/build/status%2FqueoGmbH.csharp-commons.persistence?branchName=develop)](https://dev.azure.com/queo-commons/Commons-OpenSource/_build/latest?definitionId=4&branchName=develop)

== Description
To be able to query or change data persistently in a database, for example. 

== Class diagramm 
image:images/class_diagramm_commons_persistance.png["class diagramm"]


== Example
We want to use commons.persistance to get the number and a list of all movies contained in a given database. +
Steps:

* register dao with e.g. https://docs.microsoft.com/de-de/dotnet/api/microsoft.extensions.dependencyinjection?view=dotnet-plat-ext-6.0[Microsoft.Extensions.DependencyInjection] + 
or simple create an instance like:
[source, C#]
....
IGenericDao<Movie, int> _movieDao = new MovieDao<Movie, int>();
....

* create a new class to be able to implement the dao
[source, C#]
....
public class MovieDao : GenericDao<Movie, int>
    {
        public MovieDao(MovieContext dbContext) : base(dbContext)
        {
        }
    }
....
* now you can use the dao to get all the data
[source, C#]
....
IEnumerable allMovies = movieDao.GetAll();
....

* Determine the number of films with the help of the Daos
[source, C#]
....
public long AnzahlDerFilme()
{
    return allMovies.GetCount(); //returns amount of entities
}
....

== How to use it
* include Nuget-Package (queo.commons.persistance)
[source, ps]
....
Find-Package queo.commons.persistance 
Install-Package queo.commons.persistance -ProjectName MyProject
....
* register the Dao
* create a new class to be able to implement the dao
* instantiate new Dao 
* now you can use the Dao
